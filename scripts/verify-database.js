#!/usr/bin/env node

console.log('🔍 Verificando Atualizações do Banco de Dados SMM Panel')
console.log('=' .repeat(60))

console.log('\n📋 CHECKLIST - Verifique se estas tabelas/campos existem no Supabase:')

console.log('\n🗂️  TABELA: orders (campos adicionados)')
console.log('├── ✅ provider (TEXT)')
console.log('├── ✅ provider_cost (DECIMAL)')
console.log('├── ✅ markup_percentage (DECIMAL)')
console.log('├── ✅ profit (DECIMAL)')
console.log('├── ✅ refill_id (TEXT)')
console.log('├── ✅ cancel_available (BOOLEAN)')
console.log('├── ✅ refill_available (BOOLEAN)')
console.log('├── ✅ last_status_check (TIMESTAMP)')
console.log('├── ✅ error_message (TEXT)')
console.log('├── ✅ order_data (JSONB)')
console.log('├── ✅ comments (TEXT)')
console.log('├── ✅ usernames (TEXT)')
console.log('├── ✅ hashtags (TEXT)')
console.log('├── ✅ keywords (TEXT)')
console.log('├── ✅ runs (INTEGER)')
console.log('└── ✅ interval_minutes (INTEGER)')

console.log('\n🗂️  TABELA: services (campos adicionados)')
console.log('├── ✅ provider_rate (DECIMAL)')
console.log('├── ✅ markup_type (TEXT)')
console.log('├── ✅ markup_value (DECIMAL)')
console.log('├── ✅ last_sync (TIMESTAMP)')
console.log('└── ✅ sync_enabled (BOOLEAN)')

console.log('\n🗂️  TABELA: sync_logs (nova tabela)')
console.log('├── ✅ id (UUID)')
console.log('├── ✅ provider (TEXT)')
console.log('├── ✅ action (TEXT)')
console.log('├── ✅ order_id (UUID)')
console.log('├── ✅ request_data (JSONB)')
console.log('├── ✅ response_data (JSONB)')
console.log('├── ✅ success (BOOLEAN)')
console.log('├── ✅ error_message (TEXT)')
console.log('└── ✅ created_at (TIMESTAMP)')

console.log('\n⚙️  FUNÇÕES E TRIGGERS')
console.log('├── ✅ calculate_service_price() - Função para calcular preços')
console.log('├── ✅ update_service_rate() - Função do trigger')
console.log('└── ✅ trigger_update_service_rate - Trigger automático')

console.log('\n📊 ÍNDICES CRIADOS')
console.log('├── ✅ idx_orders_provider')
console.log('├── ✅ idx_orders_provider_order_id')
console.log('├── ✅ idx_orders_last_status_check')
console.log('├── ✅ idx_sync_logs_provider')
console.log('├── ✅ idx_sync_logs_action')
console.log('└── ✅ idx_sync_logs_created_at')

console.log('\n🎯 PRÓXIMOS PASSOS:')
console.log('\n1. 🌐 ACESSE O PAINEL ADMINISTRATIVO:')
console.log('   → http://localhost:3000/dashboard/admin')

console.log('\n2. 🔑 CONFIGURE AS API KEYS:')
console.log('   → Aba "APIs" > Adicionar chaves MTP e JAP')
console.log('   → Testar conectividade')

console.log('\n3. 🔄 SINCRONIZE OS SERVIÇOS:')
console.log('   → Botão "Sincronizar Serviços"')
console.log('   → Verificar se os serviços foram importados')

console.log('\n4. 💰 CONFIGURE OS MARKUPS:')
console.log('   → Aba "Serviços" > Definir preços')
console.log('   → Usar ações rápidas (20%, 30%, +$0.50)')

console.log('\n5. ✅ ATIVE OS SERVIÇOS:')
console.log('   → Marcar serviços como "ativo"')
console.log('   → Testar criação de pedidos')

console.log('\n🚨 SE HOUVER ERROS:')
console.log('├── Verifique se todas as tabelas foram criadas')
console.log('├── Confirme se as funções existem')
console.log('├── Teste as API keys')
console.log('└── Verifique os logs no console do navegador')

console.log('\n🎉 FUNCIONALIDADES DISPONÍVEIS:')
console.log('├── 🔗 Integração completa MTP/JAP')
console.log('├── 💰 Sistema de markup automático')
console.log('├── 🔄 Sincronização de pedidos')
console.log('├── 📊 Dashboard com métricas reais')
console.log('├── 🔍 Monitoramento em tempo real')
console.log('└── 📈 Relatórios de lucro/prejuízo')

console.log('\n🏁 TUDO PRONTO! Acesse o painel e comece a usar!')
console.log('📱 URL: http://localhost:3000/dashboard/admin') 